<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NLDS API-server &mdash; Near-line Data Store Server 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/icon-black.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Microservices" href="nlds-processors.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Near-line Data Store Server
            <img src="../_static/nlds.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system-status.html">Using the system status page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-config/server-config.html">The server config file</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-config/examples.html">Server config examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Deployment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../specification.html">Specification document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/cta-emulator.html">Setting up a CTA tape emulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/alembic-migrations.html">Database Migrations with Alembic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coverage/coverage-report.html">Test coverage report</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="nlds-processors.html">NLDS Processors</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">NLDS Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-nlds.rabbit.publisher">The Publisher class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-routers">The routers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nlds.authenticators.base_authenticator">The authenticators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nlds.server_config">The server config module</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Near-line Data Store Server</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>NLDS API-server</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api-reference/nlds-server.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="nlds-api-server">
<h1>NLDS API-server<a class="headerlink" href="#nlds-api-server" title="Permalink to this headline"></a></h1>
<p>The core content of the NLDS API-server run using FastAPI.</p>
<div class="section" id="module-nlds.rabbit.publisher">
<span id="the-publisher-class"></span><h2>The Publisher class<a class="headerlink" href="#module-nlds.rabbit.publisher" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="nlds.rabbit.publisher.RabbitMQPublisher">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">nlds.rabbit.publisher.</span></span><span class="sig-name descname"><span class="pre">RabbitMQPublisher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'publisher'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setup_logging_fl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nlds.rabbit.publisher.RabbitMQPublisher" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="nlds.rabbit.publisher.RabbitMQPublisher.create_log_message">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_log_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">route</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#nlds.rabbit.publisher.RabbitMQPublisher.create_log_message" title="Permalink to this definition"></a></dt>
<dd><p>Create logging message to send to rabbit exchange. Message is, as with 
the standard message, in json format with metadata described in DETAILS 
and data, i.e. the log message, under DATA.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>str</em>) – ID of transaction as provided by fast-api</p></li>
<li><p><strong>target</strong> (<em>str</em>) – The target log file to be written to, must be 
set to the name of a particular microservice, 
usually the one which instigated the log event</p></li>
<li><p><strong>route</strong> (<em>str</em>) – Route that the message has taken. Optional, will 
be set to target if not specifed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>JSON encoded string in the proper format for message passing</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="nlds.rabbit.publisher.RabbitMQPublisher.declare_bindings">
<span class="sig-name descname"><span class="pre">declare_bindings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#nlds.rabbit.publisher.RabbitMQPublisher.declare_bindings" title="Permalink to this definition"></a></dt>
<dd><p>Go through list of exchanges from config file and declare each. Will 
also declare delayed exchanges for use in scheduled messaging if the 
delayed flag is present and activated for a given exchange.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="nlds.rabbit.publisher.RabbitMQPublisher.get_retry_delay">
<span class="sig-name descname"><span class="pre">get_retry_delay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nlds.rabbit.publisher.RabbitMQPublisher.get_retry_delay" title="Permalink to this definition"></a></dt>
<dd><p>Simple convenience function for getting the delay (in seconds) for an 
indexlist with a given number of retries. Works off of the member 
variable self.retry_delays, maxing out at its final value i.e. if there 
are 5 elements in self.retry_delays, and 7 retries requested, then the 
5th element is returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="nlds.rabbit.publisher.RabbitMQPublisher.publish_message">
<span class="sig-name descname"><span class="pre">publish_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">routing_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exchange</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pika.spec.BasicProperties</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mandatory_fl</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#nlds.rabbit.publisher.RabbitMQPublisher.publish_message" title="Permalink to this definition"></a></dt>
<dd><p>Sends a message with the specified routing key to an exchange for 
routing. If no exchange is provided it will default to the first 
exchange declared in the server_config.</p>
<p>An optional delay can be added which will force the message to sit for 
the specified number of seconds at the exchange before being routed. 
Note that this only happens if the given (or default if not specified) 
exchange is declared as a x-delayed-message exchange at start up with 
the ‘delayed’ flag.</p>
<p>This is in essence a light wrapper around the basic_publish method in 
pika.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="nlds.rabbit.publisher.RabbitMQPublisher.setup_logging">
<span class="sig-name descname"><span class="pre">setup_logging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">enable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_level</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_stdout_fl</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdout_log_level</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_files</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_max_bytes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_backup_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#nlds.rabbit.publisher.RabbitMQPublisher.setup_logging" title="Permalink to this definition"></a></dt>
<dd><p>Sets up logging for a publisher (i.e. the nlds-api server) using a set 
number of configuration options from the logging interface. Each of 
the configuration options are able to be overridden by kwargs, allowing
for child classes (i.e. consumers) to implement their own settings.</p>
<p>Allows the creation of stderr and stdout handlers under the generic 
global logger, and file specific handlers/loggers under the name of each 
output file - intended to be used for tracking each consumer’s output on 
the logging consumer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>enable</strong> (<em>bool</em>) – Whether to activate the logging 
functionality.</p></li>
<li><p><strong>log_format</strong> (<em>str</em>) – The format string of the logging output, 
as per instructions in logging docs. 
Controls all logging outputs (stderr, 
stdout, files).</p></li>
<li><p><strong>log_level</strong> (<em>str</em>) – The logging level of the global logger 
(applies to only the stderr stream)</p></li>
<li><p><strong>add_stdout_fl</strong> (<em>bool</em>) – Boolean flag for controlling whether the 
global logger also prints to stdout.</p></li>
<li><p><strong>stdout_log_level</strong> (<em>str</em>) – Logging level of the stdout logging 
stream</p></li>
<li><p><strong>log_files</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – List of files to write logging output 
to, with each made in its own logger 
object referencable by the file name.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="nlds.rabbit.publisher.RabbitMQPublisher.verify_exchange">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">verify_exchange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exchange</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nlds.rabbit.publisher.RabbitMQPublisher.verify_exchange" title="Permalink to this definition"></a></dt>
<dd><p>Verify that an exchange dict defined in the config file is valid. 
Throws a ValueError if not.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="the-routers">
<h2>The routers<a class="headerlink" href="#the-routers" title="Permalink to this headline"></a></h2>
<p>The routers control the endpoints of the API, and are the backbone of the
nlds-server API. They are documented automatically (thanks to Swagger UI) and
instructions on accessing these can be found in <span class="xref std std-doc">../home</span>.</p>
</div>
<div class="section" id="module-nlds.authenticators.base_authenticator">
<span id="the-authenticators"></span><h2>The authenticators<a class="headerlink" href="#module-nlds.authenticators.base_authenticator" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="nlds.authenticators.base_authenticator.BaseAuthenticator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">nlds.authenticators.base_authenticator.</span></span><span class="sig-name descname"><span class="pre">BaseAuthenticator</span></span><a class="headerlink" href="#nlds.authenticators.base_authenticator.BaseAuthenticator" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="nlds.authenticators.base_authenticator.BaseAuthenticator.authenticate_group">
<span class="sig-name descname"><span class="pre">authenticate_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oauth_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nlds.authenticators.base_authenticator.BaseAuthenticator.authenticate_group" title="Permalink to this definition"></a></dt>
<dd><p>Validate whether the Bearer of the token belongs to the group.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="nlds.authenticators.base_authenticator.BaseAuthenticator.authenticate_token">
<span class="sig-name descname"><span class="pre">authenticate_token</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oauth_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nlds.authenticators.base_authenticator.BaseAuthenticator.authenticate_token" title="Permalink to this definition"></a></dt>
<dd><p>Validate an oauth token.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="nlds.authenticators.base_authenticator.BaseAuthenticator.authenticate_user">
<span class="sig-name descname"><span class="pre">authenticate_user</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oauth_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nlds.authenticators.base_authenticator.BaseAuthenticator.authenticate_user" title="Permalink to this definition"></a></dt>
<dd><p>Validate whether the Bearer of the token is a valid user.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-nlds.authenticators.jasmin_authenticator"></span><dl class="py class">
<dt class="sig sig-object py" id="nlds.authenticators.jasmin_authenticator.JasminAuthenticator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">nlds.authenticators.jasmin_authenticator.</span></span><span class="sig-name descname"><span class="pre">JasminAuthenticator</span></span><a class="headerlink" href="#nlds.authenticators.jasmin_authenticator.JasminAuthenticator" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="nlds.authenticators.jasmin_authenticator.JasminAuthenticator.authenticate_group">
<span class="sig-name descname"><span class="pre">authenticate_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oauth_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nlds.authenticators.jasmin_authenticator.JasminAuthenticator.authenticate_group" title="Permalink to this definition"></a></dt>
<dd><p>Make a call to the JASMIN services for a user to determine whether
the user with the token is part of the requested group.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="nlds.authenticators.jasmin_authenticator.JasminAuthenticator.authenticate_token">
<span class="sig-name descname"><span class="pre">authenticate_token</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oauth_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nlds.authenticators.jasmin_authenticator.JasminAuthenticator.authenticate_token" title="Permalink to this definition"></a></dt>
<dd><p>Make a call to the JASMIN token introspection to determine whether
the token is a true token and whether it is valid.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="nlds.authenticators.jasmin_authenticator.JasminAuthenticator.authenticate_user">
<span class="sig-name descname"><span class="pre">authenticate_user</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oauth_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nlds.authenticators.jasmin_authenticator.JasminAuthenticator.authenticate_user" title="Permalink to this definition"></a></dt>
<dd><p>Make a call to the JASMIN services for a user to determine whether
the user with the token is a valid user.</p>
</dd></dl>

</dd></dl>

<p>Authenticate methods also contains 3 general methods, used by the above 2
modules, to validate the given user, group and token.</p>
</div>
<div class="section" id="module-nlds.server_config">
<span id="the-server-config-module"></span><h2>The server config module<a class="headerlink" href="#module-nlds.server_config" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="nlds.server_config.load_config">
<span class="sig-prename descclassname"><span class="pre">nlds.server_config.</span></span><span class="sig-name descname"><span class="pre">load_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'/etc/nlds/server_config'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#nlds.server_config.load_config" title="Permalink to this definition"></a></dt>
<dd><p>Config file for the server contains authentication and rabbitMQ sections,
the required contents of which are set by the schema in utils.constants. 
This function opens the config file (at a preset, configurable location) 
then verifies it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config_file_path</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="nlds.server_config.validate_config_file">
<span class="sig-prename descclassname"><span class="pre">nlds.server_config.</span></span><span class="sig-name descname"><span class="pre">validate_config_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#nlds.server_config.validate_config_file" title="Permalink to this definition"></a></dt>
<dd><p>Validate the JSON config file matches the schema defined in nlds_setup.     
Currently only checks that required headings and subheadings exist, i.e. 
only scans one layer deep and does no value checking.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>json_config</strong> – Config file loaded using json.load()</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="nlds-processors.html" class="btn btn-neutral float-left" title="Microservices" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2024, Neil Massey &amp; Jack Leland.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #A6C36F;
    }

    .caption-text {
        color: #828C51
    }

    .wy-nav-side {
        background: #1E352F;
    }

    .note {
        background: #BEEF9E
    }
    .admonition-title {
        background: #335145
    }

  </style>


</body>
</html>